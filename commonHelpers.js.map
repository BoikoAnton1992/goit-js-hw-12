{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/cross.png","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '42554743-967d4a87bc85b22a32926b61b';\nconst BASE_URI = 'https://pixabay.com/api/';\n\nexport default async function getImagesFromServer(searchvalue, page, perPage) {\n  const LINK = `${BASE_URI}?key=${KEY}&q=${searchvalue}&page=${page}&per_page=${perPage}`;\n  return await axios\n    .get(LINK)\n    .then(({ data }) => data)\n    .catch(error => {\n      console.error('Error while fetching images from pixabay:', error.message);\n    });\n}\n","export default function createGalleryMarkup(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        likes,\n        views,\n        comments,\n        downloads,\n        largeImageURL,\n        tags,\n      }) =>\n        `\n   <div class=\"gallery-item\">\n  <a href=\"${largeImageURL}\" class=\"gallery-link\">\n    <img src=\"${webformatURL}\" class=\"gallery-image\" alt=\"${tags}\"/>\n  </a>\n  <div class=\"gallery-info\">\n    <div class=\"info-container\">\n <h4 class=\"info-title\">Likes:</h4>\n    <p class=\"info-p\">${likes}</p>\n    </div>\n       <div class=\"info-container\">\n <h4 class=\"info-title\">Views:</h4>\n    <p class=\"info-p\">${views}</p>\n    </div>\n       <div class=\"info-container\">\n <h4 class=\"info-title\">Comments:</h4>\n    <p class=\"info-p\">${comments}</p>\n    </div>\n       <div class=\"info-container\">\n <h4 class=\"info-title\">Downloads:</h4>\n    <p class=\"info-p\">${downloads}</p>\n    </div>\n  </div>\n</div>\n        `\n    )\n    .join('');\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVHgBrZVhDoIwDIUrgfDXm+hRvBFwEr0BXsXjsJnMFVkYsvUV4SWL6Nr3MWgrUUbW2sYY6zSLY3M+Zc7cOWr9evqvL5J18av1OVRVVUdI4c6HwTxIKY5FJ/nbXA3ZYw4hR5hnIZK5MeaKDFMxC8jX3PapRPTi5lJOQWzPewHQpgz49xxkPrmcKwJyEGQe55UEVNdV64P5cmwm1tSEHe+hfAj4hUwAlTmrIKWKglzqGkl1gmg2hVmjnj0QEJuHxxK/EwiRqkGqFqmE433YaJpSFBttDnrfUxACSsWw1+LmJMhWrcyDjoBkzY+AQPM9EMl81QdhLJxOrvGfZ1L96bvblvExaj4JXtJj+QAn5UUxjHYd+gAAAABJRU5ErkJggg==\"","import 'izitoast/dist/css/iziToast.min.css';\nimport './css/styles.css';\nimport getImagesFromServer from './js/pixabay-api';\nimport createGalleryMarkup from './js/render-functions';\nimport iziToast from 'izitoast';\nimport cross from './img/cross.png';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst search = document.querySelector('.search');\nconst loader = document.querySelector('.loader');\nconst searchForm = document.querySelector('.input-container');\nconst loadMore = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery');\n\nconst perPage = 15;\nlet page;\nlet searchValue;\n\nfunction show(selector) {\n  selector.classList.remove('is-hidden');\n}\n\nfunction hidden(selector) {\n  selector.classList.add('is-hidden');\n}\n\nfunction resetPage() {\n  gallery.innerHTML = null;\n}\n\nfunction showError() {\n  hidden(loadMore);\n  hidden(loader);\n  return iziToast.error({\n    message:\n      'Sorry, there are no images matching <br>your search query. Please try again!',\n    position: 'topRight',\n    backgroundColor: '#ef4040',\n    titleColor: '#ffffff',\n    messageColor: '#ffffff',\n    iconUrl: cross,\n    theme: 'dark',\n    close: false,\n  });\n}\nfunction scroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (page === 1) return;\n  const rect = galleryItem.getBoundingClientRect();\n  window.scrollBy({ behavior: 'smooth', top: (rect.height + 24) * 2 });\n}\n\nasync function showImages() {\n  if (searchValue.trim() === '') {\n    showError();\n    return;\n  }\n\n  show(loader);\n  const data = await getImagesFromServer(searchValue, page, perPage);\n  if (data.hits.length < 1) return showError();\n  const markup = createGalleryMarkup(data.hits);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n  hidden(loader);\n  if (page * perPage < data.totalHits) show(loadMore);\n  else {\n    hidden(loadMore);\n    showError();\n  }\n  scroll();\n}\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  resetPage();\n  hidden(loadMore);\n  searchValue = search.value.trim();\n  page = 1;\n  showImages();\n});\n\nloadMore.addEventListener('click', () => {\n  page++;\n  showImages();\n});\n"],"names":["KEY","BASE_URI","getImagesFromServer","searchvalue","page","perPage","LINK","axios","data","error","createGalleryMarkup","webformatURL","likes","views","comments","downloads","largeImageURL","tags","cross","lightbox","SimpleLightbox","search","loader","searchForm","loadMore","gallery","searchValue","show","selector","hidden","resetPage","showError","iziToast","scroll","galleryItem","rect","showImages","markup","event"],"mappings":"owBAEA,MAAMA,EAAM,qCACNC,EAAW,2BAEF,eAAeC,EAAoBC,EAAaC,EAAMC,EAAS,CAC5E,MAAMC,EAAO,GAAGL,CAAQ,QAAQD,CAAG,MAAMG,CAAW,SAASC,CAAI,aAAaC,CAAO,GACrF,OAAO,MAAME,EACV,IAAID,CAAI,EACR,KAAK,CAAC,CAAE,KAAAE,CAAM,IAAKA,CAAI,EACvB,MAAMC,GAAS,CACd,QAAQ,MAAM,4CAA6CA,EAAM,OAAO,CAC9E,CAAK,CACL,CCbe,SAASC,EAAoBF,EAAM,CAChD,OAAOA,EACJ,IACC,CAAC,CACC,aAAAG,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,cAAAC,EACA,KAAAC,CACD,IACC;AAAA;AAAA,aAEKD,CAAa;AAAA,gBACVL,CAAY,gCAAgCM,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKxCL,CAAK;AAAA;AAAA;AAAA;AAAA,wBAILC,CAAK;AAAA;AAAA;AAAA;AAAA,wBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,wBAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,SAK5B,EACA,KAAK,EAAE,CACZ,CCvCA,MAAeG,EAAA,ihBCSTC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAE3CpB,EAAU,GAChB,IAAID,EACAsB,EAEJ,SAASC,EAAKC,EAAU,CACtBA,EAAS,UAAU,OAAO,WAAW,CACvC,CAEA,SAASC,EAAOD,EAAU,CACxBA,EAAS,UAAU,IAAI,WAAW,CACpC,CAEA,SAASE,GAAY,CACnBL,EAAQ,UAAY,IACtB,CAEA,SAASM,GAAY,CACnB,OAAAF,EAAOL,CAAQ,EACfK,EAAOP,CAAM,EACNU,EAAS,MAAM,CACpB,QACE,+EACF,SAAU,WACV,gBAAiB,UACjB,WAAY,UACZ,aAAc,UACd,QAASd,EACT,MAAO,OACP,MAAO,EACX,CAAG,CACH,CACA,SAASe,GAAS,CAChB,MAAMC,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAI9B,IAAS,EAAG,OAChB,MAAM+B,EAAOD,EAAY,wBACzB,OAAO,SAAS,CAAE,SAAU,SAAU,KAAMC,EAAK,OAAS,IAAM,CAAG,CAAA,CACrE,CAEA,eAAeC,GAAa,CAC1B,GAAIV,EAAY,KAAM,IAAK,GAAI,CAC7BK,IACA,MACD,CAEDJ,EAAKL,CAAM,EACX,MAAMd,EAAO,MAAMN,EAAoBwB,EAAatB,EAAMC,CAAO,EACjE,GAAIG,EAAK,KAAK,OAAS,EAAG,OAAOuB,EAAS,EAC1C,MAAMM,EAAS3B,EAAoBF,EAAK,IAAI,EAC5CiB,EAAQ,mBAAmB,YAAaY,CAAM,EAC9ClB,EAAS,QAAO,EAChBU,EAAOP,CAAM,EACTlB,EAAOC,EAAUG,EAAK,UAAWmB,EAAKH,CAAQ,GAEhDK,EAAOL,CAAQ,EACfO,KAEFE,GACF,CAEAV,EAAW,iBAAiB,SAAUe,GAAS,CAC7CA,EAAM,eAAc,EACpBR,IACAD,EAAOL,CAAQ,EACfE,EAAcL,EAAO,MAAM,OAC3BjB,EAAO,EACPgC,GACF,CAAC,EAEDZ,EAAS,iBAAiB,QAAS,IAAM,CACvCpB,IACAgC,GACF,CAAC"}